<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xml:lang="en" lang="en"
      i18n:domain="ims.upload"
      metal:use-macro="here/main_template/macros/master">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <metal:css fill-slot="style_slot">
      <link rel="stylesheet" type="text/css" media="screen" tal:attributes="href string:${portal_url}/++resource++ims.upload/css/bootstrap.css">
      <link rel="stylesheet" type="text/css" media="screen" tal:attributes="href string:${portal_url}/++resource++ims.upload/css/bootstrap-theme.css">

      <link rel="stylesheet" tal:attributes="href string:${portal_url}/++resource++ims.upload/blueimp/css/jquery.fileupload.css">
    </metal:css>

    <metal:javascript fill-slot="javascript_head_slot">
      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/js/bootstrap.min.js"></script>

      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/blueimp/js/load-image.min.js"></script>
      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/blueimp/js/canvas-to-blob.min.js"></script>
      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/blueimp/js/jquery.iframe-transport.js"></script>
      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/blueimp/js/jquery.fileupload.js"></script>
      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/blueimp/js/jquery.fileupload-process.js"></script>
      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/blueimp/js/jquery.fileupload-image.js"></script>
      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/blueimp/js/jquery.fileupload-validate.js"></script>

    </metal:javascript>
  </head>

  <body>
    <div metal:fill-slot="content-core">
      <br>
      <!-- The fileinput-button span is used to style the file input field as button -->
      <span class="btn btn-success fileinput-button">
          <i class="glyphicon glyphicon-plus"></i>
          <span>Add files...</span>
          <!-- The file input field used as target for the file upload widget -->
          <input id="fileupload" type="file" name="files[]" multiple>
      </span>
      <button class="btn btn-primary" id="uploadAll">
        <i class="glyphicon glyphicon-upload"></i>
        Upload All
      </button>
      <button class="btn btn-warning cancel" id="clearAll">
          <i class="glyphicon glyphicon-ban-circle"></i>
          Clear Uploads
      </button>
      <br>
      <br>
      <!-- The global progress bar -->
      <div id="progress" class="progress">
          <div class="progress-bar progress-bar-success"></div>
      </div>
      <!-- The container for the uploaded files -->
      <div id="files" class="files"></div>
      <br/>

      <data id="chunksize" tal:attributes="data view/chunksize" />

      <script tal:attributes="src string:${portal_url}/++resource++ims.upload/upload.js"></script>

      <h3>Files in process or aborted</h3>
      <div id="upload-chunks-listing">
      <img src="spinner.gif" class="upload-spinner" />
        loading...
      </div>

      <h3>Uploaded content</h3>
      <div id="upload-folder-listing">
        <img src="spinner.gif" class="upload-spinner" />
        loading...
      </div>

      <script type="text/javascript">
        $(document).ready(function() {
          refreshlisting()
        });
      </script>
    </div>

</body>
</html>